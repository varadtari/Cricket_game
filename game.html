<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Document</title>
    <link rel="stylesheet" href="game.css" />
  </head>
  <body>
    <h1>Bat Ball Stump Game</h1>
    <div class="btn-container">
      <button
        onclick="
        let computer_choice= genrate_comp_choice();
        let result_msg=getresult(computer_choice,'Bat');
       showresult('Bat',computer_choice,result_msg);
      "
      >
        Bat
      </button>

      <button
        onclick="
    
    computer_choice= genrate_comp_choice();
    result_msg=getresult(computer_choice,'Ball');
    showresult('Ball',computer_choice,result_msg);
        

    "
      >
        Ball
      </button>
      <button onclick="
    
      computer_choice= genrate_comp_choice();
      result_msg=getresult(computer_choice,'Stump');
     
      showresult('Stump',computer_choice,result_msg);
  
      ">Stump</button>
      <button
      onclick="localStorage.clear();
      reset_score();
      "
      >Reset</button>
      <script>
        let score;
       
        let score_str;
        score_str=localStorage.getItem('Score');
        reset_score(score_str);
        
        function reset_score(score_str) {
         score=score_str? JSON.parse(score_str):{
          win:0,
          loss:0,
          tie:0,
           
        };
        score.display_score=function()
        {
          
           alert (`Your score is win:${score.win} loss:${score.loss}, tie:${score.tie}`);
        };

        } 
         
        function genrate_comp_choice() {
          let random_number = Math.random() * 3;

          if (random_number > 0 && random_number <= 1) { 
            return "Bat";
          } else if (random_number > 1 && random_number <= 2) {
            return "Ball";
          } else {
            return "Stump";
          }
        }
        function getresult(computer_choice, user_move) {
          if (user_move === "Bat") {
            if (computer_choice == "Ball") {
              score.win++;
              return "User won";
            } else if (computer_choice == "Bat") {
              score.tie++;
              return "Its a tie";
            } else {
              score.loss++;
              return "Computer won";
            }
          } else if (user_move === "Ball") {
            if (computer_choice == "Ball") {
              score.tie++;
              return "User tie";
            } else if (computer_choice == "Bat") {
              score.loss++;
              return "Computer won";
            } else {
              score.win++;
              return "User won";
            }
          } else {
            if(computer_choice==="Bat"){
              score.win++;
                return "User won";
            }
            else if(computer_choice==="Ball"){
              score.loss++;
                return "Computer won";
            }
            else{
              score.tie++;
                return "Its a tie"
            }
          }
        }

        function showresult(userchoice,computer_choice,result_msg){
          alert(`You have chosen ${userchoice}, Computer choice is ${computer_choice} and ${result_msg}
              `);
              localStorage.setItem("Score",JSON.stringify(score));

        score.display_score();

        }
      </script
    </div>
  </body>
</html>
